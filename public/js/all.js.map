{"version":3,"sources":["jrl.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["var apicode = \"d1b7e70b48125943112710\";\n/*\n * Try to get coordinates based on HTML5 geolocation API\n * @param {type} prefix\n * @returns {Boolean}\n */\nfunction getcoords(prefix) \n{\n    if(!prefix) { prefix = '';}\n    if (navigator.geolocation) \n    { \n        navigator.geolocation.getCurrentPosition(function(position) {\n            var lat = position.coords.latitude;\n            var lon = position.coords.longitude;\n            $('#'+prefix+'lat_start').val(lat);\n            $('#'+prefix+'lon_start').val(lon);\n            if(sessionStorage && (sessionStorage.getItem(\"lon_start\") !== lon || \n                    sessionStorage.getItem(\"lat_start\") !== lat))\n            { \n                // Trigger a refresh by setting the current timestamp to Jan 1, 1970\n                sessionStorage.setItem(\"timestamp\",\"0\");\n            }\n\n            $('#'+prefix+'lon_start').trigger('change'); // Have to fire this event explicitly. Y U NO work automagically?\n        });\n    } \n    else\n    {\n        console.log('Geolocation is either disabled or not supported. The programmer is a lazy bastard. You should fill in your own weather description.');\n        return false;\n    }\n}\n\n/*\n * Add Google maps API JS to the document HEAD\n */\nfunction AddGMToHead()\n{\n    if(typeof(google) === \"undefined\") { \n        var script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src = \"https://maps.googleapis.com/maps/api/js?key=AIzaSyAqDEqlfOFkyVxhHtU0kjuOWaXLwBwDQGY&sensor=true&callback=drawMap\";\n        document.body.appendChild(script);\n        console.log('successfully added GM API');\n    }\n}\n/*\n * Fills the data for the green start marker\n * @returns {Boolean}\n */\nfunction fillStartMarker() \n{\n    if($(\"#lat_start\").val() !== '' && $(\"#lon_start\").val() !== '') {\n        return new Array($(\"#lat_start\").val(),$(\"#lon_start\").val(),'green','Start');\n    }\n    return new Array();\n}\n/*\n * Fills the data for the red stop marker\n * @returns {undefined}\n */\nfunction fillStopMarker()\n{\n    if($(\"#lat_finish\").val() !== '' && $(\"#lon_finish\").val() !== '') {\n        alert('woef');\n        return new Array($(\"#lat_finish\").val(),$(\"#lon_finish\").val(),'red','Finish');\n    }\n    return new Array();\n}\n\n/*\n * Draws map based on longitude and latitude\n * @param array arrMarker: array of markers to be drawn\n * @param elemid: id of the element\n * @param prefix string: prefix\n */\nfunction drawMap(arrWps,elemid,prefix)\n{\n    var arrMarker = new Array();\n    arrMarker[0] = fillStartMarker();\n    arrMarker[1] = fillStopMarker();\n    \n    if(String(prefix).length === 0) { prefix = '';}\n    var lon = arrMarker[0][1];\n    var lat = arrMarker[0][0];\n \n    var myOptions = {\n        zoom: 16,\n        center: new google.maps.LatLng(lat, lon),\n        streetViewControl: true,\n        mapTypeControl: false,\n        mapTypeId: google.maps.MapTypeId.ROADMAP\n    };\n    var infowindow = new google.maps.InfoWindow();\n    var map = new google.maps.Map(document.getElementById(elemid),myOptions);\n    $.each(arrMarker, function(elem,val){\n        var tmpLatLng = new google.maps.LatLng(Number(val[0]), Number(val[1]));\n        var marker = new google.maps.Marker({\n            map:map,\n            draggable:true,\n            icon: \"http://maps.google.com/mapfiles/ms/icons/\" + val[2] + \".png\",\n            position: tmpLatLng\n        });\n        \n        google.maps.event.addListener(marker, 'click', (function(marker) {\n            return function() {\n                infowindow.setContent(val[3]);\n                infowindow.open(map, marker);\n            }\n        })(marker));\n        google.maps.event.addListener(marker,'mouseup',function(e) {\n            var mypos = e.latLng;\n            $('#'+prefix+'lat_start').val(mypos.lat());\n            $('#'+prefix+'lon_start').val(mypos.lng());\n            map.setCenter(mypos);\n        });\n        \n    });\n    \n    if(arrWps.length > 0 ) {\n        var arrRoute = new Array();\n        var bounds = new google.maps.LatLngBounds();\n        $.each(arrWps, function(elem, val){\n            var tmpLatLng = new google.maps.LatLng(Number(val[0]), Number(val[1]));\n            arrRoute.push(tmpLatLng);\n            bounds.extend(tmpLatLng);\n        });\n        var myRoute = new google.maps.Polyline({\n            path: arrRoute,\n            geodesic: true,\n            strokeColor: '#FF0000',\n            strokeOpacity: 1.0,\n            strokeWeight: 2\n        });\n        map.setCenter(bounds.getCenter());\n        map.fitBounds(bounds);\n        myRoute.setMap(map);        \n    }\n}\n\n/*\n * \n * @param {type} num\n * @returns {arr|Array}\n */\nfunction fetch_weather() {\n    if( $('#date').val() == '') {\n        alert(\"Vult u svp een datum in\");\n        return false;\n    }\n    if($('#start_time').val() == '') {\n        alert('Vult u svp een geldige tijd HH:MM in');\n        return false;\n    }\n    if($('#lon_start').val() == '' || $('#lat_start').val() == '') {\n        alert('Vult u SVP uw coordinaten in');\n        return false;\n    }\n    $.getJSON( \"/forecast\", {\n        date: $('#date').val(),\n        time: $('#start_time').val(),\n        lon: $('#lon_start').val(),\n        lat: $('#lat_start').val(),\n        format: \"json\",\n        method: \"POST\"\n    })\n    .done(function(data){\n        $('#temperature').val(Math.round(data.currently.temperature));\n        $('#pressure').val(Math.round(data.currently.pressure));\n        $('#humidity').val(Math.round(100 * data.currently.humidity));\n        $('#wind_speed').val(Math.round(data.currently.windSpeed * 3.6));\n        $('#wind_direction').val(deg2compass(data.currently.windBearing));\n    })\n    .fail(function(data){\n        console.log(\"Fout bij ophalen weer.\");\n    });\n}\n\n/*\n * Convert degrees to compass direction\n * Source: http://stackoverflow.com/questions/7490660/converting-wind-direction-in-angles-to-text-words\n * @param int num\n * @return string compass direction e.g. NNW\n */\nfunction deg2compass(num) {\n    val = Math.round((parseInt(num)/22.5)+.5);\n    arr = new Array(\"N\",\"NNE\",\"NE\",\"ENE\",\"E\",\"ESE\", \"SE\", \"SSE\",\"S\",\"SSW\",\"SW\",\"WSW\",\"W\",\"WNW\",\"NW\",\"NNW\");\n    return arr[(val % 16)];\n}\n\n/*\n * Retrieve all waypoints for a workout\n * @param {integer} id\n * @returns {arrWps|Array}\n */\nfunction getWaypoints(id) {\n    arrWps = new Array();\n    $.getJSON(\"/waypoints\", {\n        \"id\": id,\n        \"method\": \"POST\",\n        \"format\": \"json\"\n    }).done(function(data) {\n        $.each(data, function(key,i) { \n            arrWps.push(new Array(i.lat,i.lon));\n        });\n    });\n    return arrWps;\n}\n/*\n * Opens a Jquery modal\n * @param id: ID of the modal element\n * @param url: URL of the route to be opened into the modal\n */\nfunction jqmodal(elem,yeoldeurl)\n{\n    $.ajax({\n        type: \"GET\",\n        url: yeoldeurl\n    }).done(function(html){\n        $('#'+elem).html(html);\n    });\n}"],"sourceRoot":"/source/"}